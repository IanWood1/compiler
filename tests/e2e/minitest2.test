// RUN: %compiler -i %s -o %t.o && %t.o
// E2E test - array references and custom insertion
// Converted from legacy minitests.cpp/minitests.program (minitest2)
// Expected return value: 115

void minitest_custom_insert(int64[10]& arr, int64 idx, int64 val){
  arr[idx] = val
  return
}

int64 main(){
  int64[10]& arr
  arr = [100; 10]
  minitest_custom_insert(arr, 1, 5)
  minitest_custom_insert(arr, 2, 5)
  minitest_custom_insert(arr, 3, 5)
  return arr[1] + arr[2] + arr[3] + arr[0]
}

// CHECK: define void (NONE) minitest_custom_insert
// CHECK: define int64 (NONE) main
